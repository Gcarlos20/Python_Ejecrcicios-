â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     ğŸ“š SISTEMA DE GESTIÃ“N DE BIBLIOTECA - ESTRUCTURA            â•‘
â•‘            Arquitectura Limpia en Python                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ ÃRBOL DEL PROYECTO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

mini_proyecto/
â”‚
â”œâ”€â”€ ğŸ“„ app.py ........................ PUNTO DE ENTRADA PRINCIPAL
â”œâ”€â”€ ğŸ“„ cargar_ejemplo.py ............ Script para datos de ejemplo
â”œâ”€â”€ ğŸ“„ tests.py ..................... Tests unitarios (11 tests)
â”œâ”€â”€ ğŸ“„ requirements.txt ............. Dependencias (ninguna)
â”‚
â”œâ”€â”€ ğŸ“– README.md .................... DocumentaciÃ³n general
â”œâ”€â”€ ğŸ“– ARQUITECTURA.md .............. GuÃ­a arquitectÃ³nica
â”œâ”€â”€ ğŸ“– INICIO_RAPIDO.md ............ GuÃ­a rÃ¡pida de inicio
â”œâ”€â”€ ğŸ“– PROYECTO_RESUMEN.txt ........ Este resumen
â”‚
â”œâ”€â”€ ğŸ“ src/
â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”œâ”€â”€ ğŸ“„ main.py ................. InicializaciÃ³n del sistema
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ domain/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚   â””â”€â”€ ğŸ“„ models.py ........... Entidades del dominio
â”‚   â”‚       â”œâ”€â”€ Libro
â”‚   â”‚       â”œâ”€â”€ Usuario
â”‚   â”‚       â””â”€â”€ PrÃ©stamo
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ repository/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ base_repository.py .. Clase abstracta base
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ libro_repository.py . CRUD de libros + bÃºsquedas
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ usuario_repository.py CRUD de usuarios
â”‚   â”‚   â””â”€â”€ ğŸ“„ prestamo_repository.py CRUD de prÃ©stamos
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ service/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ libro_service.py .... LÃ³gica de negocio (libros)
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ usuario_service.py .. LÃ³gica de negocio (usuarios)
â”‚   â”‚   â””â”€â”€ ğŸ“„ prestamo_service.py . LÃ³gica de negocio (prÃ©stamos)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ ui/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚   â””â”€â”€ ğŸ“„ cli.py .............. Interfaz CLI (menÃºs, input)
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ utils/
â”‚       â”œâ”€â”€ ğŸ“„ __init__.py
â”‚       â””â”€â”€ ğŸ“„ validaciones.py .... Validaciones reutilizables
â”‚
â””â”€â”€ ğŸ“ data/ ........................ Creada automÃ¡ticamente
    â”œâ”€â”€ ğŸ“„ libros.json ............. Base de datos de libros
    â”œâ”€â”€ ğŸ“„ usuarios.json ........... Base de datos de usuarios
    â””â”€â”€ ğŸ“„ prestamos.json ......... Base de datos de prÃ©stamos


ğŸ—ï¸ ARQUITECTURA EN CAPAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   INTERFAZ (CLI)    â”‚
                    â”‚ BibliotecaCLI       â”‚
                    â”‚ - MenÃºs             â”‚
                    â”‚ - Input/Output      â”‚
                    â”‚ - NavegaciÃ³n        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  SERVICIOS (Logic)  â”‚
                    â”‚ LibroService        â”‚
                    â”‚ UsuarioService      â”‚
                    â”‚ PrestamoService     â”‚
                    â”‚ - Validaciones      â”‚
                    â”‚ - Reglas negocio    â”‚
                    â”‚ - OrquestaciÃ³n      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ REPOSITORIOS (Data) â”‚
                    â”‚ LibroRepository     â”‚
                    â”‚ UsuarioRepository   â”‚
                    â”‚ PrestamoRepository  â”‚
                    â”‚ - CRUD              â”‚
                    â”‚ - JSON persistence  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ DOMINIO (Modelos)   â”‚
                    â”‚ Libro               â”‚
                    â”‚ Usuario             â”‚
                    â”‚ PrÃ©stamo            â”‚
                    â”‚ - Entidades puras   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


ğŸ”„ FLUJO DE DATOS - EJEMPLO: PRESTAR LIBRO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Usuario selecciona "Prestar libro"
       â”‚
       â–¼
CLI.prestar_libro()
       â”‚
       â”œâ”€â–º Mostrar libros disponibles
       â”‚   â””â”€â–º LibroService.obtener_disponibles()
       â”‚       â””â”€â–º LibroRepository.obtener_disponibles()
       â”‚           â””â”€â–º Leer JSON
       â”‚
       â”œâ”€â–º Solicitar ID de libro y usuario
       â”‚
       â””â”€â–º PrestamoService.prestar_libro(libro_id, usuario_id)
           â”‚
           â”œâ”€â–º Validar libro existe
           â”‚   â””â”€â–º LibroRepository.obtener_por_id()
           â”‚
           â”œâ”€â–º Validar libro disponible
           â”‚   â””â”€â–º Revisar estado == "disponible"
           â”‚
           â”œâ”€â–º Validar no hay prÃ©stamo activo
           â”‚   â””â”€â–º PrestamoRepository.obtener_prestamo_libro_activo()
           â”‚
           â”œâ”€â–º CREAR PRÃ‰STAMO
           â”‚   â””â”€â–º PrestamoRepository.crear()
           â”‚       â””â”€â–º Generar UUID
           â”‚       â””â”€â–º Guardar en JSON
           â”‚
           â””â”€â–º ACTUALIZAR LIBRO
               â””â”€â–º LibroRepository.actualizar(estado='prestado')
                   â””â”€â–º Actualizar en JSON


ğŸ“Š ESTRUCTURA DE DATOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

libros.json:
[
  {
    "id": "a1b2c3d4",
    "titulo": "Don Quijote",
    "autor": "Cervantes",
    "aÃ±o": 1605,
    "estado": "disponible",
    "fecha_creacion": "2026-02-04T..."
  }
]

usuarios.json:
[
  {
    "id": "e5f6g7h8",
    "nombre": "Juan PÃ©rez",
    "email": "juan@example.com",
    "fecha_registro": "2026-02-04T..."
  }
]

prestamos.json:
[
  {
    "id": "p1q2r3s4",
    "libro_id": "a1b2c3d4",
    "usuario_id": "e5f6g7h8",
    "fecha_prestamo": "2026-02-04T...",
    "fecha_devolucion": null,
    "estado": "activo"
  }
]


âœ¨ CARACTERÃSTICAS POR COMPONENTE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DOMAIN (models.py):
  â€¢ Libro(id, titulo, autor, aÃ±o, estado, fecha_creacion)
  â€¢ Usuario(id, nombre, email, fecha_registro)
  â€¢ PrÃ©stamo(id, libro_id, usuario_id, fecha_prestamo, estado)
  â€¢ MÃ©todos: to_dict(), from_dict()

REPOSITORY:
  â€¢ BaseRepository: _cargar(), _guardar(), mÃ©todos abstractos
  â€¢ LibroRepository: crear, obtener_todos, obtener_por_id,
    buscar_por_titulo, buscar_por_autor, obtener_disponibles
  â€¢ UsuarioRepository: crear, obtener_todos, obtener_por_id,
    obtener_por_email
  â€¢ PrestamoRepository: crear, obtener_todos, obtener_por_id,
    obtener_prestamos_activos, obtener_prestamo_libro_activo

SERVICE:
  â€¢ LibroService: agregar_libro, listar_libros, buscar,
    eliminar_libro, obtener_disponibles
  â€¢ UsuarioService: registrar_usuario, listar_usuarios,
    obtener_usuario, obtener_por_email
  â€¢ PrestamoService: prestar_libro, devolver_libro,
    listar_prestamos_activos, listar_todos_prestamos

UI (cli.py):
  â€¢ BibliotecaCLI: ejecutar(), gestion_libros(),
    gestion_usuarios(), gestion_prestamos(),
    mostrar_estadisticas()
  â€¢ MenÃºs intuitivos con bordes ASCII
  â€¢ Tablas formateadas
  â€¢ Iconos emoji para mejor UX

UTILS (validaciones.py):
  â€¢ validar_email(): Regex pattern
  â€¢ validar_titulo(): Longitud mÃ­nima
  â€¢ validar_autor(): Longitud mÃ­nima
  â€¢ validar_aÃ±o(): Rango numÃ©rico
  â€¢ validar_nombre(): Longitud mÃ­nima
  â€¢ Retorna: Tuple[bool, str]


ğŸ¯ FUNCIONALIDADES IMPLEMENTADAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

LIBROS:
  âœ… Agregar (tÃ­tulo, autor, aÃ±o)
  âœ… Listar todos
  âœ… Buscar por tÃ­tulo (parcial)
  âœ… Buscar por autor (parcial)
  âœ… Eliminar (si no estÃ¡ prestado)
  âœ… Ver estado (disponible/prestado)

USUARIOS:
  âœ… Registrar (nombre, email)
  âœ… Listar todos
  âœ… Validar email Ãºnico
  âœ… Validar formato email

PRÃ‰STAMOS:
  âœ… Prestar libro
  âœ… Devolver libro
  âœ… Evitar prestar libro no disponible
  âœ… Evitar prestar libro ya prestado
  âœ… Ver prÃ©stamos activos
  âœ… Ver historial (activos + devueltos)
  âœ… Registrar fechas

ESTADÃSTICAS:
  âœ… Libros disponibles vs prestados
  âœ… Total de usuarios
  âœ… PrÃ©stamos activos vs devueltos
  âœ… Tablero resumen

PERSISTENCIA:
  âœ… Guardar automÃ¡ticamente
  âœ… Cargar al iniciar
  âœ… Crear directorios automÃ¡ticamente
  âœ… Encoding UTF-8


ğŸ›¡ï¸ VALIDACIONES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

INPUT:
  â€¢ Email: Formato vÃ¡lido (usuario@dominio.com)
  â€¢ TÃ­tulo: MÃ­nimo 3 caracteres
  â€¢ Autor: MÃ­nimo 3 caracteres
  â€¢ AÃ±o: Entre 1000 y 2100
  â€¢ Nombre: MÃ­nimo 3 caracteres

LÃ“GICA DE NEGOCIO:
  â€¢ Email Ãºnico (no duplicados)
  â€¢ No eliminar libros prestados
  â€¢ No prestar libros no disponibles
  â€¢ No prestar mismo libro 2 veces
  â€¢ No devolver prÃ©stamos devueltos
  â€¢ Actualizar estado automÃ¡ticamente


ğŸš€ INICIO RÃPIDO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

OpciÃ³n 1 - Sin datos:
  > cd d:\Escritorio\mini_proyecto
  > python app.py

OpciÃ³n 2 - Con datos ejemplo:
  > cd d:\Escritorio\mini_proyecto
  > python cargar_ejemplo.py
  > python app.py

Tests unitarios:
  > python tests.py


ğŸ“š DOCUMENTACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

README.md:
  â€¢ DescripciÃ³n general
  â€¢ Funcionalidades
  â€¢ InstalaciÃ³n
  â€¢ Ejemplos de uso

ARQUITECTURA.md:
  â€¢ Diagrama de capas
  â€¢ DescripciÃ³n de componentes
  â€¢ Flujos de datos
  â€¢ Patrones implementados
  â€¢ Detalles tÃ©cnicos

INICIO_RAPIDO.md:
  â€¢ GuÃ­a paso a paso
  â€¢ Operaciones bÃ¡sicas
  â€¢ Casos de uso
  â€¢ Errores comunes
  â€¢ Tips y trucos

PROYECTO_RESUMEN.txt:
  â€¢ Resumen ejecutivo
  â€¢ Contenido del proyecto
  â€¢ Lista de caracterÃ­sticas


âœ… REQUISITOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â€¢ Python 3.7+
â€¢ SIN DEPENDENCIAS EXTERNAS
â€¢ ~50 KB espacio en disco
â€¢ Windows / Linux / macOS


ğŸ“ PATRONES DE DISEÃ‘O
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Repository Pattern
âœ“ Service Layer
âœ“ Dependency Injection
âœ“ Abstract Base Class
âœ“ Dataclasses
âœ“ Tuple Unpacking


ğŸ§ª TESTS INCLUIDOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

tests.py contiene 11 tests unitarios:

  1. test_modelo_libro()
  2. test_modelo_usuario()
  3. test_validador_email()
  4. test_validador_aÃ±o()
  5. test_validador_titulo()
  6. test_repository_crear_y_obtener()
  7. test_service_agregar_libro_valido()
  8. test_service_agregar_libro_invalido()
  9. test_usuario_email_unico()
  10. test_prestamo_flujo_completo()
  11. test_no_prestar_libro_prestado()


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                   Â¡PROYECTO COMPLETADO! âœ…

          VersiÃ³n: 1.0 | Estado: ProducciÃ³n
          Fecha: 4 de Febrero de 2026

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
